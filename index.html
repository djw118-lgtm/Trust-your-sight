                    <div class="acknowledgment-box">
                        <div class="checkbox-item">
                            <input type="checkbox" id="step4Check" onchange="updateStepButton(4)">
                            <label for="step4Check">I understand diabetic retinopathy requires professional screening</label>
                        </div>
                    </div>
                </div>
                <div class="navigation">
                    <button class="btn secondary" onclick="prevStep()">Previous</button>
                    <button class="btn" id="step4NextBtn" disabled onclick="nextStep()">Continue Learning</button>
                </div>
            </div>

            <!-- Step 5: Proper Usage Guidelines -->
            <div class="tutorial-step" id="step5">
                <div class="step-number">5</div>
                <h2 class="step-title">How to Use This App Properly</h2>
                <div class="step-content">
                    <h4>Recommended Usage:</h4>
                    <ul class="info-list">
                        <li>Use as an educational resource about eye health</li>
                        <li>Set reminders for regular professional eye exams</li>
                        <li>Track your eye health awareness and habits</li>
                        <li>Connect with qualified eye care professionals in your area</li>
                    </ul>

                    <div class="disclaimer-box critical">
                        <h4>When to See a Professional Immediately:</h4>
                        <ul class="info-list">
                            <li>Sudden vision changes or loss</li>
                            <li>Eye pain or severe discomfort</li>
                            <li>Flashing lights or new floaters</li>
                            <li>Any concerning eye symptoms</li>
                        </ul>
                    </div>

                    <div class="acknowledgment-box">
                        <div class="checkbox-item">
                            <input type="checkbox" id="step5Check" onchange="updateStepButton(5)">
                            <label for="step5Check">I understand proper usage guidelines and emergency warning signs</label>
                        </div>
                    </div>
                </div>
                <div class="navigation">
                    <button class="btn secondary" onclick="prevStep()">Previous</button>
                    <button class="btn" id="step5NextBtn" disabled onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 6: Professional Referral Process -->
            <div class="tutorial-step" id="step6">
                <div class="step-number">6</div>
                <h2 class="step-title">Finding Professional Eye Care</h2>
                <div class="step-content">
                    <p>This app includes a referral system to help you connect with qualified eye care professionals.</p>
                    
                    <h4>Types of Eye Care Professionals:</h4>
                    <ul class="info-list">
                        <li><strong>Ophthalmologists:</strong> Medical doctors specializing in eye care</li>
                        <li><strong>Optometrists:</strong> Doctors of optometry for eye exams and care</li>
                        <li><strong>Retinal Specialists:</strong> For diabetic retinopathy screening</li>
                    </ul>

                    <div class="acknowledgment-box">
                        <div class="checkbox-item">
                            <input type="checkbox" id="step6Check" onchange="updateStepButton(6)">
                            <label for="step6Check">I understand the importance of connecting with qualified eye care professionals</label>
                        </div>
                    </div>
                </div>
                <div class="navigation">
                    <button class="btn secondary" onclick="prevStep()">Previous</button>
                    <button class="btn" id="step6NextBtn" disabled onclick="nextStep()">Almost Done</button>
                </div>
            </div>

            <!-- Step 7: Final Acknowledgment -->
            <div class="tutorial-step" id="step7">
                <div class="step-number">7</div>
                <h2 class="step-title">Legal Acknowledgment & Identity Confirmation</h2>
                <div class="step-content">
                    <div class="disclaimer-box critical">
                        <h4>Identity Verification Required</h4>
                        <p>By checking the boxes below, you are legally confirming:</p>
                        <ul class="info-list">
                            <li>You are the account holder completing this education</li>
                            <li>You are 18 years or older</li>
                            <li>All information provided is accurate and truthful</li>
                            <li id="familyIdentityText" class="hidden">You accept responsibility for all family members' usage</li>
                        </ul>
                        </div>

                    <div class="acknowledgment-box">
                        <h4>Required Legal Acknowledgments:</h4>
                        <div class="checkbox-group" id="acknowledgmentChecks">
                            <div class="checkbox-item">
                                <input type="checkbox" id="check1" onchange="updateCompletionButton()">
                                <label for="check1">I am 18+ years old and the actual person completing this education</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="check2" onchange="updateCompletionButton()">
                                <label for="check2">I understand this app is for educational purposes and general wellness monitoring only</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="check3" onchange="updateCompletionButton()">
                                <label for="check3">I understand this app cannot diagnose medical conditions or replace professional eye care</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="check4" onchange="updateCompletionButton()">
                                <label for="check4">I understand I should see qualified professionals for eye health concerns and regular screening</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="check5" onchange="updateCompletionButton()">
                                <label for="check5">I have read and understand the limitations and proper use of this educational tool</label>
                            </div>
                            <div class="checkbox-item hidden" id="familyResponsibilityCheck">
                                <input type="checkbox" id="check6" onchange="updateCompletionButton()">
                                <label for="check6">I accept full responsibility for educating and supervising all family members' usage of this app</label>
                            </div>
                            <div class="checkbox-item hidden" id="seniorIdConfirmCheck">
                                <input type="checkbox" id="check7" onchange="updateCompletionButton()">
                                <label for="check7">I confirm I am 65+ years old and will provide valid ID verification for senior pricing</label>
                            </div>
                        </div>
                    </div>

                    <div class="disclaimer-box">
                        <h4>Electronic Signature</h4>
                        <p>Your completion of this education with checked acknowledgments serves as your electronic signature and legal agreement to these terms.</p>
                        <p><strong>Date:</strong> <span id="currentDate"></span></p>
                        <p><strong>Account Type:</strong> <span id="selectedAccountType"></span></p>
                    </div>
                </div>
                <div class="navigation">
                    <button class="btn secondary" onclick="prevStep()">Previous</button>
                    <button class="btn" id="completeBtn" disabled onclick="completeEducation()">Complete Education & Create Account</button>
                    
 </div>
            </div>

            <!-- Completion Screen -->
            <div class="completion-screen" id="completionScreen">
                <div class="checkmark">âœ“</div>
                <h2 class="step-title">Education Complete!</h2>
                <p>You have successfully completed the mandatory eye health education program.</p>
                
                <div class="app-preview">
                    <h5>You now have access to:</h5>
                    <div class="feature-grid">
                        <div class="feature-item">Eye Health Dashboard</div>
                        <div class="feature-item">Exam Reminders</div>
                        <div class="feature-item">Educational Library</div>
                        <div class="feature-item">Professional Directory</div>
                    </div>
                </div>

                <button class="btn" onclick="enterApp()">Enter Trust Your Sight App</button>
                
                <p style="margin-top: 16px; font-size: 12px; color: #6b7280;">
                    Your education completion has been recorded. You can review this information anytime in the app settings.
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 7;
        let userAge = null;
        let accountType = null;

        // Utility functions
        function show(id) { document.getElementById(id).classList.remove('hidden'); }
        function hide(id) { document.getElementById(id).classList.add('hidden'); }
        function toggle(id, show) { document.getElementById(id).classList.toggle('hidden', !show); }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function setAge(age) {
            userAge = age;
            if (age === 'adult') {
                show('adultOptions');
                hide('minorMessage');
            } else {
                hide('adultOptions');
                show('minorMessage');
                document.getElementById('continueBtn').disabled = true;
            }
        }

        function selectAccountType(type) {
            accountType = type;
            
            // Hide all account-specific sections
            hide('seniorVerification');
            hide('familyInfo');
            
            // Show relevant section and enable/disable continue button
            if (type === 'senior') {
                show('seniorVerification');
                updateContinueButton();
            } else if (type === 'family') {
                show('familyInfo');
                document.getElementById('continueBtn').disabled = false;
            } else {
                document.getElementById('continueBtn').disabled = false;
            }
        }

        function updateContinueButton() {
            if (accountType === 'senior') {
                const seniorCheck = document.getElementById('seniorIdCheck').checked;
                document.getElementById('continueBtn').disabled = !seniorCheck;
            } else {
                document.getElementById('continueBtn').disabled = false;
            }
        }

        function updateStepButton(stepNum) {
            const checkbox = document.getElementById(`step${stepNum}Check`);
            const button = document.getElementById(`step${stepNum}NextBtn`);
            if (checkbox && button) {
                button.disabled = !checkbox.checked;
                }
        }

        function nextStep() {
            if (currentStep === 1) {
                updateAccountSummary();
                toggle('familyDisclaimerSection', accountType === 'family');
            }
            
            if (currentStep < totalSteps) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep++;
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
                
                if (currentStep === 7) {
                    updateFinalAcknowledgment();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep--;
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
            }
        }

        function updateAccountSummary() {
            const summaryEl = document.getElementById('accountSummary');
            const accountInfo = {
                individual: { name: 'Individual Account', price: '$19.99/month', details: 'Basic features for personal use' },
                family: { name: 'Family Account', price: '$29.99/month', details: 'Up to 4 family members, you are responsible for their education and supervision' },
                senior: { name: 'Senior Account', price: '$14.99/month', details: 'Age 65+ with ID verification required' }
            };
            
            const info = accountInfo[accountType];
            summaryEl.innerHTML = `
                <h5>Your Account Selection:</h5>
                <p><strong>${info.name}</strong> - ${info.price}<br>${info.details}</p>
            `;
        }
        function updateFinalAcknowledgment() {
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString();
            document.getElementById('selectedAccountType').textContent = 
                accountType.charAt(0).toUpperCase() + accountType.slice(1);
            
            // Show account-specific acknowledgments
            toggle('familyIdentityText', accountType === 'family');
            toggle('familyResponsibilityCheck', accountType === 'family');
            toggle('seniorIdConfirmCheck', accountType === 'senior');
        }

        function updateCompletionButton() {
            const requiredChecks = ['check1', 'check2', 'check3', 'check4', 'check5'];
            
            if (accountType === 'family') requiredChecks.push('check6');
            if (accountType === 'senior') requiredChecks.push('check7');
            
            const allChecked = requiredChecks.every(id => 
                document.getElementById(id)?.checked
            );
            
            document.getElementById('completeBtn').disabled = !allChecked;
        }

        function completeEducation() {
            const completionData = {
                completed: true,
                timestamp: new Date().toISOString(),
                version: '1.0',
                accountType: accountType,
                userAge: userAge,
                acknowledgments: {
                    medicalLimitations: true,
                    educationalPurpose: true,
                    professionalCare: true,
                    properUsage: true,
                    identity: true,
                    ...(accountType === 'family' && { familyResponsibility: true }),
                    ...(accountType === 'senior' && { seniorIdRequired: true })
                }
            };
            
            localStorage.setItem('trustYourSight_educationComplete', JSON.stringify(completionData));

            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById('completionScreen').classList.add('active');
            updateProgress();
        }
        function enterApp() {
            const educationData = JSON.parse(localStorage.getItem('trustYourSight_educationComplete'));
            
            if (educationData.accountType === 'senior' && educationData.acknowledgments.seniorIdRequired) {
                alert('Please complete ID verification for senior account activation. Redirecting to verification process...');
            } else {
                alert(`Education complete! Redirecting to ${accountType} dashboard...`);
            }
        }

        // Initialize
        updateProgress();

        // Check if education was already completed
        document.addEventListener('DOMContentLoaded', function() {
            const educationData = localStorage.getItem('trustYourSight_educationComplete');
            if (educationData) {
                const data = JSON.parse(educationData);
                if (data.completed) {
                    console.log('Education previously completed on:', data.timestamp);
                    console.log('Account type:', data.accountType);
                }
            }
        });
    </script>
</body>
</html>
